---
title: LIN网络测试
date: 2021-12-21 13:12:24
tags:
- LIN
- 汽车电子
categories:
- 工作笔记
---

## 1.物理层

### 1.1.工作电压范围测试

​	设置CANoe为主节点，分别设置电压为最高，最低，正常电压，测试从节点是否能正常响应数据

### 1.2.信号电压阀值

**LIN总线电平定义**

显性电平最大值0.4Vsup,隐性电平最大值0.6Vsup

**Vsup指总线收发器的电源电压**

### 1.3.从节点响应时间

应答的余量TResponse_Rest包含 应答间隔以及字节间间隔，规定为应答额定传输时间的 0.4 倍

Tbit=1/19200s≈0.0521ms

时间最长为规定的1.4倍

一个数据包含起始位停止位和数据，共有10位数据

除了8位数据场还有1位校验场，共有9字节数据

![](https://cdn.jsdelivr.net/gh/czc13611858691/picgoRepo/MommyTalk1640071602845.svg)

所有数据应该可以在规定时间传输完成。

## 2.网络层

### 2.1.同步间隔长度测试

设备识别的同步间隔长度为13Tbit-26Tbit，使用canoe分别设置同步间隔长度位13Tbit,20Tbit,26Tbit,设备都能正常识别

### 2.2.同步间隔界定符长度变化

设备识别的界定符长度为1Tbit-14Tbit，使用canoe分别设置同步界定符位1Tbit,5Tbit,14Tbit设备都能正常识别

### 2.3.帧头长度变化, IUT 为从节点

帧头长度识别范围为34Tbit-47Tbit，使用canoe设置间隔13Tbit,界定符1Tbit,设备可以正常识别;使用canoe设置间隔26Tbit,界定符1Tbit，设备可以正常识别

### 2.4.振荡器误差

振荡器误差在±1.5%之间，设备可以正常识别。

若是波特率为19200bit/s,最大19488bit/s，最小为18912bit/s

## 3.错误通讯

如下条件满足，response_err发送一次错误信息

- PID奇偶校验错误
- checksum错误
- 干扰发送接收数据场显性电平

## 4.睡眠唤醒

### 4.1.从节点接收睡眠命令帧

接收到0x3c帧，第一个数据为0x00，从节点进入睡眠模式

### 4.2.总线空闲4s进入睡眠模式

LIN调度表停止调度超过4S，从节点进入睡眠模式

### 4.3.从节点接收到唤醒指令

从节点处于睡眠模式，接收到唤醒指令可以正常工作

